{"id":"413c5e9d80fe494f7aa75ff571093f0a","name":"C134_01: Update expense amount successfully","start":1767687949597,"stop":1767687955771,"duration":6174,"status":"broken","fullName":"test.test_api_putexpenseid#test_updateexpense","historyId":"6c707b1769c4b21cf59a2680c4f679b8.d41d8cd98f00b204e9800998ecf8427e","flaky":false,"muted":false,"known":false,"hidden":false,"labels":[{"name":"story","value":"Update Expense"},{"name":"severity","value":"critical"},{"name":"feature","value":"Expense Management"},{"name":"parentSuite","value":"test"},{"name":"suite","value":"test_api_putexpenseid"},{"name":"host","value":"Godz-Gaming-PC"},{"name":"thread","value":"29304-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.test_api_putexpenseid"}],"groupedLabels":{"story":["Update Expense"],"severity":["critical"],"feature":["Expense Management"],"parentSuite":["test"],"suite":["test_api_putexpenseid"],"host":["Godz-Gaming-PC"],"thread":["29304-MainThread"],"framework":["pytest"],"language":["cpython3"],"package":["test.test_api_putexpenseid"]},"parameters":[],"links":[{"name":"C134_01","url":"C134_01","type":"tms"}],"steps":[{"stepId":"5f287bd2c6d51fa5cd075f2d8e0a48b4","name":"Retrieve current expense data","status":"passed","steps":[{"link":{"id":"acb9480ea8edf1c737fa7ae27be29494","originalFileName":"bd65505a-cca8-4903-95b0-5851b2d68208-attachment.json","ext":".json","name":"Original Expense Data","contentType":"application/json","used":true,"missed":false,"contentLength":158},"type":"attachment"},{"link":{"id":"9f37a8c5ddcaf919d594cf03670aa9d1","originalFileName":"7535abf7-3043-412b-87ed-ba3baea9a7c8-attachment.txt","ext":".txt","name":"Original Amount","contentType":"text/plain","used":true,"missed":false,"contentLength":5},"type":"attachment"}],"parameters":[],"start":1767687949597,"stop":1767687951652,"duration":2055,"type":"step","hasSimilarErrorInSubSteps":false},{"stepId":"9e18985e1287a4dd510c4f0c9f4ebcc9","name":"Update expense with new amount","status":"passed","steps":[{"link":{"id":"5a7eacde06f8b59e542854a8fb595f8d","originalFileName":"ab991e5c-2fb3-48ef-b787-632cd230d72d-attachment.json","ext":".json","name":"Update Request Body","contentType":"application/json","used":true,"missed":false,"contentLength":61},"type":"attachment"},{"link":{"id":"a58edc16e79b8c3ce7853ce82b0e0c62","originalFileName":"b8fec95b-9b28-4f77-87ad-3fb0a3b48ead-attachment.txt","ext":".txt","name":"Update Response Status","contentType":"text/plain","used":true,"missed":false,"contentLength":3},"type":"attachment"},{"link":{"id":"2385748eef6a415d71d96819cfac76bf","originalFileName":"e316d4f0-8293-42f9-890a-462918714d47-attachment.json","ext":".json","name":"Update Response Body","contentType":"application/json","used":true,"missed":false,"contentLength":55},"type":"attachment"}],"parameters":[],"start":1767687951652,"stop":1767687953718,"duration":2066,"type":"step","hasSimilarErrorInSubSteps":false},{"stepId":"6035e81f0c904f16ce0fc76d98a6e6fc","name":"Verify update was successful","status":"passed","steps":[],"parameters":[],"start":1767687953719,"stop":1767687953719,"duration":0,"type":"step","hasSimilarErrorInSubSteps":false},{"stepId":"714755b1f9efb17f5bf1722dded893f5","name":"Revert changes to original amount","status":"passed","steps":[{"link":{"used":true,"missed":false,"id":"ab16822361a82d2cfe703f9d4cb34df8","originalFileName":"3ac6894f-0f08-45ea-b3d8-6fd6416fab91-attachment.txt","ext":".txt","contentType":"text/plain","contentLength":3,"name":"Revert Response Status"},"type":"attachment"}],"parameters":[],"start":1767687953719,"stop":1767687955770,"duration":2051,"type":"step","hasSimilarErrorInSubSteps":false},{"stepId":"2416c0e680fafba3707d42ea0f080e21","name":"Verify revert was successful","status":"broken","steps":[],"parameters":[],"start":1767687955770,"stop":1767687955770,"duration":0,"type":"step","message":"KeyError: 'expense'\n","trace":"  File \"C:\\Users\\thede\\CodeSilver-P1\\expense_apps\\employee\\test\\test_api_putexpenseid.py\", line 100, in test_updateexpense\n    assert response.json()[\"expense\"][\"amount\"] == original\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^\n","hasSimilarErrorInSubSteps":false}],"error":{"message":"KeyError: 'expense'","trace":"loginfirst = <RequestsCookieJar[Cookie(version=0, name='jwt_token', value='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ...1767774349, discard=False, comment=None, comment_url=None, rest={'HttpOnly': None, 'SameSite': 'Lax'}, rfc2109=False)]>\n\n    @allure.feature(\"Expense Management\")\n    @allure.story(\"Update Expense\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"C134_01: Update expense amount successfully\")\n    @allure.description(\"Test to verify that a pending expense can be updated successfully and then reverted\")\n    @allure.testcase(\"C134_01\")\n    def test_updateexpense(loginfirst):\n        expense_url = \"http://localhost:5000/api/expenses/2\"\n    \n        with allure.step(\"Retrieve current expense data\"):\n            data = requests.get(expense_url, cookies=loginfirst).json()\n            original = data[\"expense\"][\"amount\"]\n            allure.attach(\n                str(data),\n                \"Original Expense Data\",\n                allure.attachment_type.JSON\n            )\n            allure.attach(\n                str(original),\n                \"Original Amount\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Update expense with new amount\"):\n            newdat = original + 10\n            body = {\n                \"amount\": newdat,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            allure.attach(\n                str(body),\n                \"Update Request Body\",\n                allure.attachment_type.JSON\n            )\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Update Response Status\",\n                allure.attachment_type.TEXT\n            )\n            allure.attach(\n                response.text,\n                \"Update Response Body\",\n                allure.attachment_type.JSON\n            )\n    \n        with allure.step(\"Verify update was successful\"):\n            assert response.status_code in (200, 400)\n            if response.status_code == 200:\n                assert response.json()[\"expense\"][\"amount\"] == newdat\n            else:\n                assert \"error\" in response.json()\n    \n        with allure.step(\"Revert changes to original amount\"):\n            body = {\n                \"amount\": original,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Revert Response Status\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Verify revert was successful\"):\n            assert response.status_code in (200, 400)\n>           assert response.json()[\"expense\"][\"amount\"] == original\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           KeyError: 'expense'\n\ntest\\test_api_putexpenseid.py:100: KeyError"},"testCase":{"id":"6c707b1769c4b21cf59a2680c4f679b8","name":"C134_01: Update expense amount successfully","fullName":"test.test_api_putexpenseid#test_updateexpense"},"environment":"default","setup":[{"id":"52ab1889c35a9a1bd1f38bca1e5776a5","type":"before","name":"monkeypatch","status":"passed","steps":[],"duration":0},{"id":"0e8098afb0d64de4f9eab77394048a91","type":"before","name":"patch_auth_service","status":"passed","steps":[],"duration":0},{"id":"50f26f858c6f657da0ff6c166d5f2f31","type":"before","name":"loginfirst","status":"passed","steps":[{"stepId":"aef4a7ab47f0c0124e0a4cf161e38b19","name":"Authenticate user and obtain session cookies","status":"passed","steps":[{"link":{"used":true,"missed":false,"id":"be03357a2f1020e676a6002f1407d842","originalFileName":"27f9995d-e49c-4179-a6d3-cc0cffbe52c2-attachment.json","ext":".json","contentType":"application/json","contentLength":52,"name":"Login Credentials"},"type":"attachment"},{"link":{"used":true,"missed":false,"id":"bdb1868a0cb336349b7e6d4db450e543","originalFileName":"9d368007-e326-4d53-80f3-0591af6bc3d1-attachment.txt","ext":".txt","contentType":"text/plain","contentLength":3,"name":"Login Status Code"},"type":"attachment"}],"parameters":[],"start":1767687947542,"stop":1767687949597,"duration":2055,"type":"step","hasSimilarErrorInSubSteps":false}],"duration":2055}],"teardown":[{"id":"f526b36647ad3a89a49af63e9521f3e1","type":"after","name":"monkeypatch::0","status":"passed","steps":[],"duration":0},{"id":"2507ae30b0b0e63569c682a2d176c363","type":"after","name":"loginfirst::0","status":"passed","steps":[],"duration":0}],"history":[{"id":"db700672149259232c589231aea4df39","name":"C134_01: Update expense amount successfully","fullName":"test.test_api_putexpenseid#test_updateexpense","environment":"default","status":"broken","message":"KeyError: 'expense'","trace":"loginfirst = <RequestsCookieJar[Cookie(version=0, name='jwt_token', value='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ...1767773785, discard=False, comment=None, comment_url=None, rest={'HttpOnly': None, 'SameSite': 'Lax'}, rfc2109=False)]>\n\n    @allure.feature(\"Expense Management\")\n    @allure.story(\"Update Expense\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"C134_01: Update expense amount successfully\")\n    @allure.description(\"Test to verify that a pending expense can be updated successfully and then reverted\")\n    @allure.testcase(\"C134_01\")\n    def test_updateexpense(loginfirst):\n        expense_url = \"http://localhost:5000/api/expenses/2\"\n    \n        with allure.step(\"Retrieve current expense data\"):\n            data = requests.get(expense_url, cookies=loginfirst).json()\n            original = data[\"expense\"][\"amount\"]\n            allure.attach(\n                str(data),\n                \"Original Expense Data\",\n                allure.attachment_type.JSON\n            )\n            allure.attach(\n                str(original),\n                \"Original Amount\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Update expense with new amount\"):\n            newdat = original + 10\n            body = {\n                \"amount\": newdat,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            allure.attach(\n                str(body),\n                \"Update Request Body\",\n                allure.attachment_type.JSON\n            )\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Update Response Status\",\n                allure.attachment_type.TEXT\n            )\n            allure.attach(\n                response.text,\n                \"Update Response Body\",\n                allure.attachment_type.JSON\n            )\n    \n        with allure.step(\"Verify update was successful\"):\n            assert response.status_code in (200, 400)\n            if response.status_code == 200:\n                assert response.json()[\"expense\"][\"amount\"] == newdat\n            else:\n                assert \"error\" in response.json()\n    \n        with allure.step(\"Revert changes to original amount\"):\n            body = {\n                \"amount\": original,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Revert Response Status\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Verify revert was successful\"):\n            assert response.status_code in (200, 400)\n>           assert response.json()[\"expense\"][\"amount\"] == original\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           KeyError: 'expense'\n\ntest\\test_api_putexpenseid.py:100: KeyError","start":1767687385314,"stop":1767687391461,"duration":6147,"labels":[{"name":"severity","value":"critical"},{"name":"story","value":"Update Expense"},{"name":"feature","value":"Expense Management"},{"name":"parentSuite","value":"test"},{"name":"suite","value":"test_api_putexpenseid"},{"name":"host","value":"Godz-Gaming-PC"},{"name":"thread","value":"43364-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.test_api_putexpenseid"}],"url":"","historyId":"6c707b1769c4b21cf59a2680c4f679b8.d41d8cd98f00b204e9800998ecf8427e","reportLinks":[]},{"id":"ac5257260e5560188f7d57598b511220","name":"C134_01: Update expense amount successfully","fullName":"test.test_api_putexpenseid#test_updateexpense","environment":"default","status":"broken","message":"KeyError: 'expense'","trace":"loginfirst = <RequestsCookieJar[Cookie(version=0, name='jwt_token', value='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ...1767773361, discard=False, comment=None, comment_url=None, rest={'HttpOnly': None, 'SameSite': 'Lax'}, rfc2109=False)]>\n\n    @allure.feature(\"Expense Management\")\n    @allure.story(\"Update Expense\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"C134_01: Update expense amount successfully\")\n    @allure.description(\"Test to verify that a pending expense can be updated successfully and then reverted\")\n    @allure.testcase(\"C134_01\")\n    def test_updateexpense(loginfirst):\n        expense_url = \"http://localhost:5000/api/expenses/2\"\n    \n        with allure.step(\"Retrieve current expense data\"):\n            data = requests.get(expense_url, cookies=loginfirst).json()\n            original = data[\"expense\"][\"amount\"]\n            allure.attach(\n                str(data),\n                \"Original Expense Data\",\n                allure.attachment_type.JSON\n            )\n            allure.attach(\n                str(original),\n                \"Original Amount\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Update expense with new amount\"):\n            newdat = original + 10\n            body = {\n                \"amount\": newdat,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            allure.attach(\n                str(body),\n                \"Update Request Body\",\n                allure.attachment_type.JSON\n            )\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Update Response Status\",\n                allure.attachment_type.TEXT\n            )\n            allure.attach(\n                response.text,\n                \"Update Response Body\",\n                allure.attachment_type.JSON\n            )\n    \n        with allure.step(\"Verify update was successful\"):\n            assert response.status_code in (200, 400)\n            if response.status_code == 200:\n                assert response.json()[\"expense\"][\"amount\"] == newdat\n            else:\n                assert \"error\" in response.json()\n    \n        with allure.step(\"Revert changes to original amount\"):\n            body = {\n                \"amount\": original,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Revert Response Status\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Verify revert was successful\"):\n            assert response.status_code in (200, 400)\n>           assert response.json()[\"expense\"][\"amount\"] == original\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           KeyError: 'expense'\n\ntest\\test_api_putexpenseid.py:100: KeyError","start":1767686962000,"stop":1767686968138,"duration":6138,"labels":[{"name":"feature","value":"Expense Management"},{"name":"story","value":"Update Expense"},{"name":"severity","value":"critical"},{"name":"parentSuite","value":"test"},{"name":"suite","value":"test_api_putexpenseid"},{"name":"host","value":"Godz-Gaming-PC"},{"name":"thread","value":"53160-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.test_api_putexpenseid"}],"url":"","historyId":"6c707b1769c4b21cf59a2680c4f679b8.d41d8cd98f00b204e9800998ecf8427e","reportLinks":[]},{"id":"ac5257260e5560188f7d57598b511220","name":"C134_01: Update expense amount successfully","fullName":"test.test_api_putexpenseid#test_updateexpense","environment":"default","status":"broken","message":"KeyError: 'expense'","trace":"loginfirst = <RequestsCookieJar[Cookie(version=0, name='jwt_token', value='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ...1767773361, discard=False, comment=None, comment_url=None, rest={'HttpOnly': None, 'SameSite': 'Lax'}, rfc2109=False)]>\n\n    @allure.feature(\"Expense Management\")\n    @allure.story(\"Update Expense\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"C134_01: Update expense amount successfully\")\n    @allure.description(\"Test to verify that a pending expense can be updated successfully and then reverted\")\n    @allure.testcase(\"C134_01\")\n    def test_updateexpense(loginfirst):\n        expense_url = \"http://localhost:5000/api/expenses/2\"\n    \n        with allure.step(\"Retrieve current expense data\"):\n            data = requests.get(expense_url, cookies=loginfirst).json()\n            original = data[\"expense\"][\"amount\"]\n            allure.attach(\n                str(data),\n                \"Original Expense Data\",\n                allure.attachment_type.JSON\n            )\n            allure.attach(\n                str(original),\n                \"Original Amount\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Update expense with new amount\"):\n            newdat = original + 10\n            body = {\n                \"amount\": newdat,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            allure.attach(\n                str(body),\n                \"Update Request Body\",\n                allure.attachment_type.JSON\n            )\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Update Response Status\",\n                allure.attachment_type.TEXT\n            )\n            allure.attach(\n                response.text,\n                \"Update Response Body\",\n                allure.attachment_type.JSON\n            )\n    \n        with allure.step(\"Verify update was successful\"):\n            assert response.status_code in (200, 400)\n            if response.status_code == 200:\n                assert response.json()[\"expense\"][\"amount\"] == newdat\n            else:\n                assert \"error\" in response.json()\n    \n        with allure.step(\"Revert changes to original amount\"):\n            body = {\n                \"amount\": original,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Revert Response Status\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Verify revert was successful\"):\n            assert response.status_code in (200, 400)\n>           assert response.json()[\"expense\"][\"amount\"] == original\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           KeyError: 'expense'\n\ntest\\test_api_putexpenseid.py:100: KeyError","start":1767686962000,"stop":1767686968138,"duration":6138,"labels":[{"name":"feature","value":"Expense Management"},{"name":"story","value":"Update Expense"},{"name":"severity","value":"critical"},{"name":"parentSuite","value":"test"},{"name":"suite","value":"test_api_putexpenseid"},{"name":"host","value":"Godz-Gaming-PC"},{"name":"thread","value":"53160-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.test_api_putexpenseid"}],"url":"","historyId":"6c707b1769c4b21cf59a2680c4f679b8.d41d8cd98f00b204e9800998ecf8427e","reportLinks":[]}],"retries":[],"breadcrumbs":[["test","test_api_putexpenseid"]],"retry":false,"titlePath":["test","test_api_putexpenseid.py"],"retriesCount":0,"attachments":[{"link":{"id":"acb9480ea8edf1c737fa7ae27be29494","originalFileName":"bd65505a-cca8-4903-95b0-5851b2d68208-attachment.json","ext":".json","name":"Original Expense Data","contentType":"application/json","used":true,"missed":false,"contentLength":158},"type":"attachment"},{"link":{"id":"9f37a8c5ddcaf919d594cf03670aa9d1","originalFileName":"7535abf7-3043-412b-87ed-ba3baea9a7c8-attachment.txt","ext":".txt","name":"Original Amount","contentType":"text/plain","used":true,"missed":false,"contentLength":5},"type":"attachment"},{"link":{"id":"5a7eacde06f8b59e542854a8fb595f8d","originalFileName":"ab991e5c-2fb3-48ef-b787-632cd230d72d-attachment.json","ext":".json","name":"Update Request Body","contentType":"application/json","used":true,"missed":false,"contentLength":61},"type":"attachment"},{"link":{"id":"a58edc16e79b8c3ce7853ce82b0e0c62","originalFileName":"b8fec95b-9b28-4f77-87ad-3fb0a3b48ead-attachment.txt","ext":".txt","name":"Update Response Status","contentType":"text/plain","used":true,"missed":false,"contentLength":3},"type":"attachment"},{"link":{"id":"2385748eef6a415d71d96819cfac76bf","originalFileName":"e316d4f0-8293-42f9-890a-462918714d47-attachment.json","ext":".json","name":"Update Response Body","contentType":"application/json","used":true,"missed":false,"contentLength":55},"type":"attachment"},{"link":{"used":true,"missed":false,"id":"ab16822361a82d2cfe703f9d4cb34df8","originalFileName":"3ac6894f-0f08-45ea-b3d8-6fd6416fab91-attachment.txt","ext":".txt","contentType":"text/plain","contentLength":3,"name":"Revert Response Status"},"type":"attachment"}],"order":27}