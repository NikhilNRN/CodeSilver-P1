{"name": "C134_01: Update expense amount successfully", "status": "broken", "statusDetails": {"message": "KeyError: 'expense'", "trace": "loginfirst = <RequestsCookieJar[Cookie(version=0, name='jwt_token', value='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ...1767774349, discard=False, comment=None, comment_url=None, rest={'HttpOnly': None, 'SameSite': 'Lax'}, rfc2109=False)]>\n\n    @allure.feature(\"Expense Management\")\n    @allure.story(\"Update Expense\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"C134_01: Update expense amount successfully\")\n    @allure.description(\"Test to verify that a pending expense can be updated successfully and then reverted\")\n    @allure.testcase(\"C134_01\")\n    def test_updateexpense(loginfirst):\n        expense_url = \"http://localhost:5000/api/expenses/2\"\n    \n        with allure.step(\"Retrieve current expense data\"):\n            data = requests.get(expense_url, cookies=loginfirst).json()\n            original = data[\"expense\"][\"amount\"]\n            allure.attach(\n                str(data),\n                \"Original Expense Data\",\n                allure.attachment_type.JSON\n            )\n            allure.attach(\n                str(original),\n                \"Original Amount\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Update expense with new amount\"):\n            newdat = original + 10\n            body = {\n                \"amount\": newdat,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            allure.attach(\n                str(body),\n                \"Update Request Body\",\n                allure.attachment_type.JSON\n            )\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Update Response Status\",\n                allure.attachment_type.TEXT\n            )\n            allure.attach(\n                response.text,\n                \"Update Response Body\",\n                allure.attachment_type.JSON\n            )\n    \n        with allure.step(\"Verify update was successful\"):\n            assert response.status_code in (200, 400)\n            if response.status_code == 200:\n                assert response.json()[\"expense\"][\"amount\"] == newdat\n            else:\n                assert \"error\" in response.json()\n    \n        with allure.step(\"Revert changes to original amount\"):\n            body = {\n                \"amount\": original,\n                \"description\": data[\"expense\"][\"description\"],\n                \"date\": data[\"expense\"][\"date\"]\n            }\n            response = requests.put(expense_url, json=body, cookies=loginfirst)\n            allure.attach(\n                str(response.status_code),\n                \"Revert Response Status\",\n                allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Verify revert was successful\"):\n            assert response.status_code in (200, 400)\n>           assert response.json()[\"expense\"][\"amount\"] == original\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           KeyError: 'expense'\n\ntest\\test_api_putexpenseid.py:100: KeyError"}, "description": "Test to verify that a pending expense can be updated successfully and then reverted", "steps": [{"name": "Retrieve current expense data", "status": "passed", "attachments": [{"name": "Original Expense Data", "source": "bd65505a-cca8-4903-95b0-5851b2d68208-attachment.json", "type": "application/json"}, {"name": "Original Amount", "source": "7535abf7-3043-412b-87ed-ba3baea9a7c8-attachment.txt", "type": "text/plain"}], "start": 1767687949597, "stop": 1767687951652}, {"name": "Update expense with new amount", "status": "passed", "attachments": [{"name": "Update Request Body", "source": "ab991e5c-2fb3-48ef-b787-632cd230d72d-attachment.json", "type": "application/json"}, {"name": "Update Response Status", "source": "b8fec95b-9b28-4f77-87ad-3fb0a3b48ead-attachment.txt", "type": "text/plain"}, {"name": "Update Response Body", "source": "e316d4f0-8293-42f9-890a-462918714d47-attachment.json", "type": "application/json"}], "start": 1767687951652, "stop": 1767687953718}, {"name": "Verify update was successful", "status": "passed", "start": 1767687953719, "stop": 1767687953719}, {"name": "Revert changes to original amount", "status": "passed", "attachments": [{"name": "Revert Response Status", "source": "3ac6894f-0f08-45ea-b3d8-6fd6416fab91-attachment.txt", "type": "text/plain"}], "start": 1767687953719, "stop": 1767687955770}, {"name": "Verify revert was successful", "status": "broken", "statusDetails": {"message": "KeyError: 'expense'\n", "trace": "  File \"C:\\Users\\thede\\CodeSilver-P1\\expense_apps\\employee\\test\\test_api_putexpenseid.py\", line 100, in test_updateexpense\n    assert response.json()[\"expense\"][\"amount\"] == original\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^\n"}, "start": 1767687955770, "stop": 1767687955770}], "start": 1767687949597, "stop": 1767687955771, "uuid": "1859d34f-0b74-4c2d-9f24-efc07c994c5e", "historyId": "8a68356c70b95a0f99ba1f86d83f82a4", "testCaseId": "8a68356c70b95a0f99ba1f86d83f82a4", "fullName": "test.test_api_putexpenseid#test_updateexpense", "labels": [{"name": "story", "value": "Update Expense"}, {"name": "severity", "value": "critical"}, {"name": "feature", "value": "Expense Management"}, {"name": "parentSuite", "value": "test"}, {"name": "suite", "value": "test_api_putexpenseid"}, {"name": "host", "value": "Godz-Gaming-PC"}, {"name": "thread", "value": "29304-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test.test_api_putexpenseid"}], "links": [{"type": "tms", "url": "C134_01", "name": "C134_01"}], "titlePath": ["test", "test_api_putexpenseid.py"]}